schema: '2.0'
stages:
  ReadNPZ_1:
    cmd: zntrack run src.ReadNPZ --name ReadNPZ_1
    deps:
    - path: data
      hash: md5
      md5: 6286f5d842e836292740d14fc4998159.dir
      size: 249204412
      nfiles: 67117
    params:
      params.yaml:
        ReadNPZ_1:
          regex: 4comp.cfg_valid_0
    outs:
    - path: nodes/ReadNPZ_1/atoms.h5
      hash: md5
      md5: bf53178639cadcac6799953490ab0d9d
      size: 2971432
    - path: nodes/ReadNPZ_1/node-meta.json
      hash: md5
      md5: 9d28aa8b0cc5f6c9f8c69db9f89566c4
      size: 48
  ReadNPZ:
    cmd: zntrack run src.ReadNPZ --name ReadNPZ
    deps:
    - path: data
      hash: md5
      md5: 6286f5d842e836292740d14fc4998159.dir
      size: 249204412
      nfiles: 67117
    params:
      params.yaml:
        ReadNPZ:
          regex: 4comp.cfg_train_0
    outs:
    - path: nodes/ReadNPZ/atoms.h5
      hash: md5
      md5: ddc44a95cc2a1a4dbe966a0974058394
      size: 11751288
    - path: nodes/ReadNPZ/node-meta.json
      hash: md5
      md5: 250e383a5677f4d90d1f98b87b1478e7
      size: 48
  MLModel:
    cmd: zntrack run ipsuite.nodes.MACE --name MLModel
    deps:
    - path: nodes/ReadNPZ/atoms.h5
      hash: md5
      md5: ddc44a95cc2a1a4dbe966a0974058394
      size: 11751288
    - path: nodes/ReadNPZ/node-meta.json
      hash: md5
      md5: 250e383a5677f4d90d1f98b87b1478e7
      size: 48
    - path: nodes/ReadNPZ_1/atoms.h5
      hash: md5
      md5: bf53178639cadcac6799953490ab0d9d
      size: 2971432
    - path: nodes/ReadNPZ_1/node-meta.json
      hash: md5
      md5: 9d28aa8b0cc5f6c9f8c69db9f89566c4
      size: 48
    params:
      params.yaml:
        MLModel:
          use_energy: true
          use_forces: true
          use_stresses: false
      mace.yaml:
        E0s: average
        batch_size: 32
        clip_grad: 1.0
        correlation: 3
        ema: true
        ema_decay: 0.99
        eval_interval: 1
        forces_weight: 100
        max_L: 2
        max_num_epochs: 1200
        num_channels: 64
        num_cutoff_basis: 5
        num_interactions: 2
        num_radial_basis: 8
        patience: 20
        r_max: 4.7
        seed: 42
        start_swa: 600
        swa: true
        valid_batch_size: 32
    outs:
    - path: nodes/MLModel/model
      hash: md5
      md5: b231e9e8d55824bc65a8df35800114cf.dir
      size: 140779848
      nfiles: 8
    - path: nodes/MLModel/node-meta.json
      hash: md5
      md5: 490cc0c5259f74ece4124198adf75bd9
      size: 48
    - path: nodes/MLModel/test-data.extxyz
      hash: md5
      md5: 3c9e9d66817c626de9def3186b219811
      size: 620849
    - path: nodes/MLModel/train-data.extxyz
      hash: md5
      md5: fe763a3e4452b1c1ce6e5fc9b23c0413
      size: 2459387
    - path: nodes/MLModel/training.csv
      hash: md5
      md5: b874f10f7a40549684b770cf2fc20d0f
      size: 193536
  Prediction:
    cmd: zntrack run ipsuite.nodes.Prediction --name Prediction
    deps:
    - path: nodes/MLModel/model
      hash: md5
      md5: b231e9e8d55824bc65a8df35800114cf.dir
      size: 140779848
      nfiles: 8
    - path: nodes/MLModel/node-meta.json
      hash: md5
      md5: 490cc0c5259f74ece4124198adf75bd9
      size: 48
    - path: nodes/MLModel/test-data.extxyz
      hash: md5
      md5: 3c9e9d66817c626de9def3186b219811
      size: 620849
    - path: nodes/MLModel/train-data.extxyz
      hash: md5
      md5: fe763a3e4452b1c1ce6e5fc9b23c0413
      size: 2459387
    - path: nodes/MLModel/training.csv
      hash: md5
      md5: b874f10f7a40549684b770cf2fc20d0f
      size: 193536
    - path: nodes/ReadNPZ_1/atoms.h5
      hash: md5
      md5: bf53178639cadcac6799953490ab0d9d
      size: 2971432
    - path: nodes/ReadNPZ_1/node-meta.json
      hash: md5
      md5: 9d28aa8b0cc5f6c9f8c69db9f89566c4
      size: 48
    outs:
    - path: nodes/Prediction/atoms.h5
      hash: md5
      md5: 4f5354f115595a54da72cb1cc24983d1
      size: 2977424
    - path: nodes/Prediction/node-meta.json
      hash: md5
      md5: 0bba576bdc91590553b4bacae09d9d38
      size: 48
  PredictionMetrics:
    cmd: zntrack run ipsuite.nodes.PredictionMetrics --name PredictionMetrics
    deps:
    - path: nodes/Prediction/atoms.h5
      hash: md5
      md5: 4f5354f115595a54da72cb1cc24983d1
      size: 2977424
    - path: nodes/Prediction/node-meta.json
      hash: md5
      md5: 0bba576bdc91590553b4bacae09d9d38
      size: 48
    outs:
    - path: nodes/PredictionMetrics/deviat_stress.json
      hash: md5
      md5: 651b38f52aa819f681ded075ae1da4c8
      size: 163
    - path: nodes/PredictionMetrics/energy.json
      hash: md5
      md5: aaa9bc24cc452e6bf30a4e383fa6710a
      size: 157
    - path: nodes/PredictionMetrics/energy_df.csv
      hash: md5
      md5: be4502ab60f2019ce500255ccfb228ed
      size: 4216
    - path: nodes/PredictionMetrics/forces.json
      hash: md5
      md5: 6bf0b3718c6141898166799e0b74b1cd
      size: 169
    - path: nodes/PredictionMetrics/forces_df.csv
      hash: md5
      md5: d569eef02218e90dcf441315cb852ead
      size: 769046
    - path: nodes/PredictionMetrics/hydro_stress.json
      hash: md5
      md5: 1cf788b43e8448d55e77f7965515cbdc
      size: 159
    - path: nodes/PredictionMetrics/node-meta.json
      hash: md5
      md5: f843bc06657769c72935118107bcdd47
      size: 48
    - path: nodes/PredictionMetrics/plots
      hash: md5
      md5: f388116c7601396753771f3dce17b698.dir
      size: 252994
      nfiles: 5
    - path: nodes/PredictionMetrics/stress.json
      hash: md5
      md5: 1f5d0242bc1479259ce7bef13eb5330d
      size: 157
    - path: nodes/PredictionMetrics/stress_deviatoric_df.csv
      hash: md5
      md5: 4d5bf009fe2c2dba31de4e82d80acdb8
      size: 41285
    - path: nodes/PredictionMetrics/stress_df.csv
      hash: md5
      md5: 45a554e20d47808a08946b1ec3e63d77
      size: 36527
    - path: nodes/PredictionMetrics/stress_hydrostatic_df.csv
      hash: md5
      md5: a68096f1865fdd803d92fbb8e9c0aed3
      size: 4970
