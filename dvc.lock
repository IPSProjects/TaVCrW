schema: '2.0'
stages:
  ReadNPZ_1:
    cmd: zntrack run src.ReadNPZ --name ReadNPZ_1
    deps:
    - path: data
      hash: md5
      md5: acf760c97d2466ffa190a5b6c58fe260.dir
      size: 249204412
      nfiles: 67167
    params:
      params.yaml:
        ReadNPZ_1:
          regex: 4comp.cfg_valid_1
    outs:
    - path: nodes/ReadNPZ_1/atoms.h5
      hash: md5
      md5: 159d8492252883ace114fd33a144eda0
      size: 2971432
    - path: nodes/ReadNPZ_1/node-meta.json
      hash: md5
      md5: 6b3ca2d8d081b70fa19002b33cb5a05f
      size: 48
  ReadNPZ:
    cmd: zntrack run src.ReadNPZ --name ReadNPZ
    deps:
    - path: data
      hash: md5
      md5: acf760c97d2466ffa190a5b6c58fe260.dir
      size: 249204412
      nfiles: 67167
    params:
      params.yaml:
        ReadNPZ:
          regex: 4comp.cfg_train_1
    outs:
    - path: nodes/ReadNPZ/atoms.h5
      hash: md5
      md5: 82282250d0273fbc4fb3ad52f5ce1782
      size: 11751288
    - path: nodes/ReadNPZ/node-meta.json
      hash: md5
      md5: 27703a2525e0e804471ca6216a5bf962
      size: 48
  MLModel:
    cmd: zntrack run ipsuite.nodes.MACE --name MLModel
    deps:
    - path: nodes/ReadNPZ/atoms.h5
      hash: md5
      md5: 82282250d0273fbc4fb3ad52f5ce1782
      size: 11751288
    - path: nodes/ReadNPZ/node-meta.json
      hash: md5
      md5: 27703a2525e0e804471ca6216a5bf962
      size: 48
    - path: nodes/ReadNPZ_1/atoms.h5
      hash: md5
      md5: 159d8492252883ace114fd33a144eda0
      size: 2971432
    - path: nodes/ReadNPZ_1/node-meta.json
      hash: md5
      md5: 6b3ca2d8d081b70fa19002b33cb5a05f
      size: 48
    params:
      params.yaml:
        MLModel:
          use_energy: true
          use_forces: true
          use_stresses: false
      mace.yaml:
        E0s: average
        batch_size: 16
        clip_grad: 1.0
        correlation: 3
        ema: true
        ema_decay: 0.99
        eval_interval: 1
        forces_weight: 100
        max_L: 2
        max_num_epochs: 1200
        num_channels: 64
        num_cutoff_basis: 5
        num_interactions: 2
        num_radial_basis: 8
        patience: 200
        r_max: 4.7
        seed: 42
        start_swa: 600
        swa: true
        valid_batch_size: 16
    outs:
    - path: nodes/MLModel/model
      hash: md5
      md5: 265a4f3f2c4d2dbc6fc6c6e4d5543b6b.dir
      size: 141810786
      nfiles: 8
    - path: nodes/MLModel/node-meta.json
      hash: md5
      md5: 65300b6119926c65f6e1b3adc87359b4
      size: 48
    - path: nodes/MLModel/test-data.extxyz
      hash: md5
      md5: e36e56c5cdc5002531df9bababa81871
      size: 552536
    - path: nodes/MLModel/train-data.extxyz
      hash: md5
      md5: dc0496b374287f768d7128f852751888
      size: 2527700
    - path: nodes/MLModel/training.csv
      hash: md5
      md5: 529a4d1a9007a97afecc8b7d76ab346e
      size: 200990
  Prediction:
    cmd: zntrack run ipsuite.nodes.Prediction --name Prediction
    deps:
    - path: nodes/MLModel/model
      hash: md5
      md5: 265a4f3f2c4d2dbc6fc6c6e4d5543b6b.dir
      size: 141810786
      nfiles: 8
    - path: nodes/MLModel/node-meta.json
      hash: md5
      md5: 65300b6119926c65f6e1b3adc87359b4
      size: 48
    - path: nodes/MLModel/test-data.extxyz
      hash: md5
      md5: e36e56c5cdc5002531df9bababa81871
      size: 552536
    - path: nodes/MLModel/train-data.extxyz
      hash: md5
      md5: dc0496b374287f768d7128f852751888
      size: 2527700
    - path: nodes/MLModel/training.csv
      hash: md5
      md5: 529a4d1a9007a97afecc8b7d76ab346e
      size: 200990
    - path: nodes/TestData/atoms.h5
      hash: md5
      md5: 2c63c70f50bb08b31967c6aaf2222bc6
      size: 299736
    - path: nodes/TestData/node-meta.json
      hash: md5
      md5: 161d275a9a7529abbc8238357ce0d6b9
      size: 48
    outs:
    - path: nodes/Prediction/atoms.h5
      hash: md5
      md5: 5c9d58ad18dd985665c5584e4f8030d5
      size: 303680
    - path: nodes/Prediction/node-meta.json
      hash: md5
      md5: a4165a691590bb2c68cbee98951ede84
      size: 48
  PredictionMetrics:
    cmd: zntrack run ipsuite.nodes.PredictionMetrics --name PredictionMetrics
    deps:
    - path: nodes/Prediction/atoms.h5
      hash: md5
      md5: 5c9d58ad18dd985665c5584e4f8030d5
      size: 303680
    - path: nodes/Prediction/node-meta.json
      hash: md5
      md5: a4165a691590bb2c68cbee98951ede84
      size: 48
    outs:
    - path: nodes/PredictionMetrics/deviat_stress.json
      hash: md5
      md5: 9fda8149ad1a99ebcb4141ba4b489de3
      size: 189
    - path: nodes/PredictionMetrics/energy.json
      hash: md5
      md5: 25a47281f85ea78c7c7ffaf7489465f6
      size: 185
    - path: nodes/PredictionMetrics/energy_df.csv
      hash: md5
      md5: 267a0f7d7cc2532c765ba710dba56eb0
      size: 1021
    - path: nodes/PredictionMetrics/forces.json
      hash: md5
      md5: 0fc33fe60950843b1bcd476783945f2e
      size: 191
    - path: nodes/PredictionMetrics/forces_df.csv
      hash: md5
      md5: 3f44bfe6312c8a2fa450425bae57f7ef
      size: 210121
    - path: nodes/PredictionMetrics/hydro_stress.json
      hash: md5
      md5: 177584ec6a0ef4ab667c6d7f9233bba5
      size: 192
    - path: nodes/PredictionMetrics/node-meta.json
      hash: md5
      md5: 94d902004032ab47ff914fd48cde0a03
      size: 48
    - path: nodes/PredictionMetrics/plots
      hash: md5
      md5: 7dfd89cb1aed51dd75f9b88d0a9f04c4.dir
      size: 387953
      nfiles: 5
    - path: nodes/PredictionMetrics/stress.json
      hash: md5
      md5: 23fa3654c4d863f8125e00abb65ca4fe
      size: 191
    - path: nodes/PredictionMetrics/stress_deviatoric_df.csv
      hash: md5
      md5: 65c8bdb89aca7a6dd025e689c5e9c5a2
      size: 8569
    - path: nodes/PredictionMetrics/stress_df.csv
      hash: md5
      md5: 8abcba309300f3f4ff18f94ed1b340f4
      size: 7722
    - path: nodes/PredictionMetrics/stress_hydrostatic_df.csv
      hash: md5
      md5: 2602cb33e640a08f4cec4cabb0223c29
      size: 1049
  TestData:
    cmd: zntrack run src.ReadNPZ --name TestData
    deps:
    - path: data
      hash: md5
      md5: acf760c97d2466ffa190a5b6c58fe260.dir
      size: 249204412
      nfiles: 67167
    params:
      params.yaml:
        TestData:
          regex: noW.cfg_valid_1
    outs:
    - path: nodes/TestData/atoms.h5
      hash: md5
      md5: 2c63c70f50bb08b31967c6aaf2222bc6
      size: 299736
    - path: nodes/TestData/node-meta.json
      hash: md5
      md5: 161d275a9a7529abbc8238357ce0d6b9
      size: 48
