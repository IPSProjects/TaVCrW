schema: '2.0'
stages:
  ReadNPZ_1:
    cmd: zntrack run src.ReadNPZ --name ReadNPZ_1
    deps:
    - path: data
      hash: md5
      md5: 6286f5d842e836292740d14fc4998159.dir
      size: 249204412
      nfiles: 67117
    params:
      params.yaml:
        ReadNPZ_1:
          regex: 4comp.cfg_valid_0
    outs:
    - path: nodes/ReadNPZ_1/atoms.h5
      hash: md5
      md5: bf53178639cadcac6799953490ab0d9d
      size: 2971432
    - path: nodes/ReadNPZ_1/node-meta.json
      hash: md5
      md5: 9d28aa8b0cc5f6c9f8c69db9f89566c4
      size: 48
  ReadNPZ:
    cmd: zntrack run src.ReadNPZ --name ReadNPZ
    deps:
    - path: data
      hash: md5
      md5: 6286f5d842e836292740d14fc4998159.dir
      size: 249204412
      nfiles: 67117
    params:
      params.yaml:
        ReadNPZ:
          regex: 4comp.cfg_train_*
    outs:
    - path: nodes/ReadNPZ/atoms.h5
      hash: md5
      md5: 3f7bac0e01db90363679dd073eeca7c4
      size: 116124056
    - path: nodes/ReadNPZ/node-meta.json
      hash: md5
      md5: 89017625f783c3e27a2b96eecbc592f9
      size: 48
  MLModel:
    cmd: zntrack run ipsuite.nodes.MACE --name MLModel
    deps:
    - path: nodes/ReadNPZ/atoms.h5
      hash: md5
      md5: 3f7bac0e01db90363679dd073eeca7c4
      size: 116124056
    - path: nodes/ReadNPZ/node-meta.json
      hash: md5
      md5: 89017625f783c3e27a2b96eecbc592f9
      size: 48
    - path: nodes/ReadNPZ_1/atoms.h5
      hash: md5
      md5: bf53178639cadcac6799953490ab0d9d
      size: 2971432
    - path: nodes/ReadNPZ_1/node-meta.json
      hash: md5
      md5: 9d28aa8b0cc5f6c9f8c69db9f89566c4
      size: 48
    params:
      params.yaml:
        MLModel:
          use_energy: true
          use_forces: true
          use_stresses: false
      mace.yaml:
        E0s: average
        batch_size: 32
        clip_grad: 1.0
        correlation: 3
        ema: true
        ema_decay: 0.99
        eval_interval: 1
        forces_weight: 100
        max_L: 2
        max_num_epochs: 1200
        num_channels: 64
        num_cutoff_basis: 5
        num_interactions: 2
        num_radial_basis: 8
        patience: 20
        r_max: 4.2
        seed: 42
        start_swa: 600
        swa: true
        valid_batch_size: 32
    outs:
    - path: nodes/MLModel/model
      hash: md5
      md5: b39b3253231ed702aa87f9a914d5204b.dir
      size: 147795037
      nfiles: 8
    - path: nodes/MLModel/node-meta.json
      hash: md5
      md5: eb48a95bbf15c0aff879d8df92672c51
      size: 48
    - path: nodes/MLModel/test-data.extxyz
      hash: md5
      md5: 3c9e9d66817c626de9def3186b219811
      size: 620849
    - path: nodes/MLModel/train-data.extxyz
      hash: md5
      md5: c1a47781b28c11c121cec9403084de92
      size: 25058819
    - path: nodes/MLModel/training.csv
      hash: md5
      md5: 6b9276d2d04198e99fda371e0fbd14de
      size: 161019
  Prediction:
    cmd: zntrack run ipsuite.nodes.Prediction --name Prediction
    deps:
    - path: nodes/MLModel/model
      hash: md5
      md5: b39b3253231ed702aa87f9a914d5204b.dir
      size: 147795037
      nfiles: 8
    - path: nodes/MLModel/node-meta.json
      hash: md5
      md5: eb48a95bbf15c0aff879d8df92672c51
      size: 48
    - path: nodes/MLModel/test-data.extxyz
      hash: md5
      md5: 3c9e9d66817c626de9def3186b219811
      size: 620849
    - path: nodes/MLModel/train-data.extxyz
      hash: md5
      md5: c1a47781b28c11c121cec9403084de92
      size: 25058819
    - path: nodes/MLModel/training.csv
      hash: md5
      md5: 6b9276d2d04198e99fda371e0fbd14de
      size: 161019
    - path: nodes/ReadNPZ_1/atoms.h5
      hash: md5
      md5: bf53178639cadcac6799953490ab0d9d
      size: 2971432
    - path: nodes/ReadNPZ_1/node-meta.json
      hash: md5
      md5: 9d28aa8b0cc5f6c9f8c69db9f89566c4
      size: 48
    outs:
    - path: nodes/Prediction/atoms.h5
      hash: md5
      md5: 058f2e6945c7baf7750763da06edc602
      size: 2977424
    - path: nodes/Prediction/node-meta.json
      hash: md5
      md5: 7d8dc33045a72d2ab5bc3a96a91683d8
      size: 48
  PredictionMetrics:
    cmd: zntrack run ipsuite.nodes.PredictionMetrics --name PredictionMetrics
    deps:
    - path: nodes/Prediction/atoms.h5
      hash: md5
      md5: 57f2f6b463c8a046b0d7cbafc2c020f8
      size: 2977424
    - path: nodes/Prediction/node-meta.json
      hash: md5
      md5: efc36dede3a0545750ce1e78b5061de7
      size: 48
    outs:
    - path: nodes/PredictionMetrics/deviat_stress.json
      hash: md5
      md5: c90a09cc618622886644bdb758afbe89
      size: 159
    - path: nodes/PredictionMetrics/energy.json
      hash: md5
      md5: 5b920a24c8dca7d8c357d7e1fc388dfe
      size: 159
    - path: nodes/PredictionMetrics/energy_df.csv
      hash: md5
      md5: e8bc980e2b438d795d913d50ebf76d40
      size: 4214
    - path: nodes/PredictionMetrics/forces.json
      hash: md5
      md5: 056a70dc83ebc6b8f89e6ca5b963b074
      size: 171
    - path: nodes/PredictionMetrics/forces_df.csv
      hash: md5
      md5: 5924042c70a8d5cf6bd3a814c784be2d
      size: 771045
    - path: nodes/PredictionMetrics/hydro_stress.json
      hash: md5
      md5: 0e0dca60dbebfb5cc0f010b4116bac57
      size: 159
    - path: nodes/PredictionMetrics/node-meta.json
      hash: md5
      md5: f21d5a0fd8798da249fd9ec31318fa06
      size: 48
    - path: nodes/PredictionMetrics/plots
      hash: md5
      md5: b65f78b288e696df3e1b6f7074ccc15b.dir
      size: 208977
      nfiles: 5
    - path: nodes/PredictionMetrics/stress.json
      hash: md5
      md5: 0c39eeeb49a61ad2b64d7a02d643049d
      size: 155
    - path: nodes/PredictionMetrics/stress_deviatoric_df.csv
      hash: md5
      md5: 7a245a5ff6883abd80dd3e481b534d92
      size: 41281
    - path: nodes/PredictionMetrics/stress_df.csv
      hash: md5
      md5: 53c6799c308db1d7cdc8bbd428d3ff74
      size: 36521
    - path: nodes/PredictionMetrics/stress_hydrostatic_df.csv
      hash: md5
      md5: 0171f6bde26bf98bd999f0e4b6e81942
      size: 4984
